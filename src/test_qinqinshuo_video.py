#!/usr/bin/env python3
"""
ã€Šå½ˆç´èªªæ„›ã€‹å½±ç‰‡LLMæ™ºèƒ½èªç¾©åˆ†ææ¸¬è©¦
- æ¸¬è©¦å°è±¡ï¼šè¬è¯çµ‚èº«å­¸ç¿’æ•™è‚²ä¸­å¿ƒæ•™è‚²å¿—å·¥é™³ä¿¡å¤«é„­éº—å¦‚å ±å°
- æ¸¬è©¦é‡é»ï¼šè¤‡é›œäººç‰©é—œä¿‚ã€å¤šå±¤æ¬¡å¼•è¨€æ­¸å±¬ã€æ•™è‚²å¿—å·¥ä¸»é¡Œåˆ†æ
"""

import asyncio
import sys
from pathlib import Path

# ç¢ºä¿å¯ä»¥å°å…¥æ¨¡çµ„
sys.path.insert(0, str(Path(__file__).parent))

from llm_semantic_analyzer import LLMSemanticAnalyzer

def get_qinqinshuo_article():
    """ç²å–ã€Šå½ˆç´èªªæ„›ã€‹å ±å°å…§å®¹"""
    return """
é™£é™£ç´è²å¾å±‹å…§æšæ´©å‡ºä¾†ï¼Œä¸æ–·å½ˆå¥è‘—ã€ˆé›™äººæ•é ­ã€‰çš„æ¨‚æ›²ï¼Œäº¤é›œè‘—æ­Œè²ã€è«‡ç¬‘è²ï¼Œåœ¨é™³ä¿¡å¤«èˆ‡é„­éº—å¦‚çš„åˆå¥ä¹‹é–“ï¼Œæº«æš–å¹¸ç¦çš„æ°›åœæ´‹æº¢åœ¨å®¶ä¸­çš„æ¯å€‹è§’è½ã€‚ä»–å€‘å¤«å¦»å€†å››åå¤šå¹´çš„æƒ…æ„Ÿï¼Œç´ç‘Ÿåˆé³´ï¼Œé¶¼é°ˆæƒ…æ·±ï¼Œæ„Ÿæ©èƒ½åœ¨æ…ˆæ¿Ÿä¸€èµ·åœ“å¤¢ã€‚

â—å¾å°æ‰æ ¹å“æ ¼ç¾å¾·

é™³ä¿¡å¤«å‡ºç”Ÿæ–¼æ–°åŒ—å¸‚äº”è‚¡å€ï¼Œæœ‰å››å…„ä¸‰å§Šèˆ‡ä¸€å°èƒèƒå¦¹å¦¹ï¼Œå› ç‚ºå”å”å¾€ç”Ÿå¾Œåƒ…æœ‰ä¸‰å€‹å¥³å…’ï¼Œçˆ¶æ¯å°‡ä¿¡å¤«éç¹¼çµ¦å¬¸å¬¸ï¼Œä½†å…©å®¶ç”Ÿæ´»èµ·å±…éƒ½åœ¨ä¸€èµ·ã€‚ä¿¡å¤«é›–æœ‰çœ¾å¤šå®¶äººçš„ç…§é¡§ï¼Œä½†åœ¨èª²é¤˜ä¹‹æš‡éƒ½æœƒå»å¹«å¿™æ¯è¦ªæ‹”è‰ã€æ¡ç­ï¼Œé¤Šæˆåˆ»è‹¦å‹¤å„‰çš„ç¿’æ…£ã€‚ä»–å°¤å…¶çæƒœèƒ½æœ‰è®€æ›¸çš„æ©Ÿæœƒï¼Œä¸€ç›´èªçœŸå‘å­¸ï¼Œè€ƒå–å¤§åŒåˆä¸­ï¼Œå†é€²å¤§åŒå°ˆç§‘ï¼Œé å®˜å½¹ç•¢é€²å…¥å¤§åŒé¦¬é”å» ä¸Šç­ã€‚ç™½å¤©å·¥ä½œï¼Œæ™šä¸Šç¹¼çºŒé€²ä¿®å¤§åŒå¤§å­¸å¤œé–“éƒ¨ï¼ŒåŠå·¥åŠè®€å®Œæˆå­¸æ¥­ã€‚

é„­éº—å¦‚çš„çˆ¶æ¯å—æ—¥æœ¬æ•™è‚²ï¼Œè‚²æœ‰å…­å¥³äºŒç”·ï¼Œçˆ¶æ¯æ•™å°åš´æ ¼ï¼Œåªè¦ä¸€å€‹å­©å­åšéŒ¯äº‹ï¼Œå…«å€‹å­©å­å…¨éƒ¨é€£åè™•ç½°ï¼Œå› æ­¤é¤Šæˆéº—å¦‚å¾ªè¦è¹ˆçŸ©ã€é †å¾è½è©±çš„å€‹æ€§ã€‚æ¯å¤©å®šæ™‚å®šé‡ç”Ÿæ´»ä½œæ¯ï¼Œæ”¾å­¸æº–æ™‚å›å®¶ï¼Œç”šè‡³ä¸æœƒéš¨ä¾¿å¤–å‡ºåˆ°åŒå­¸å®¶ç©ã€‚å¾å°è¬¹è¨˜è‘—æ¯è¦ªæ•™å°ï¼šã€Œå¥³å­©å­ä»¥å¾Œè¦æ§äººå®¶çš„é£¯ç¢—ï¼Œä¸€å®šè¦å­¸ç…®é£¯èœã€ç‡™è¡£æœç­‰å®¶å‹™ã€‚ã€ç›¸å¤«æ•™å­çš„å©¦å¥³æ‡¿å¾·å¾å°å°±æ·±è€•åœ¨éº—å¦‚å¿ƒä¸­ã€‚

éº—å¦‚é«˜ä¸­ç•¢æ¥­å¾Œï¼Œå°±åœ¨å®¶è£¡çš„å…¬å¸ä¸Šç­ï¼Œå”åŠ©æ–‡æ›¸è™•ç†èˆ‡éŠ€è¡Œçš„ç›¸é—œäº‹å‹™ï¼ŒåŒæ™‚ä¹Ÿä¸å¿˜å¹«å¿™ç…®é£¯ç­‰å®¶å‹™ã€‚1975å¹´å©¦å¥³ç¯€é‚£å¤©ï¼Œèˆ‡ä¿¡å¤«åˆæ¬¡ç›¸è¦ªèªè­˜ï¼Œåœ¨é›™æ–¹å®¶é•·æ»¿æ„ä¹‹ä¸‹ï¼Œäº¤å¾€ä¸€å€‹æœˆå¾Œè¨‚å©šï¼ŒåŠå¹´å¾Œçµå©šã€‚éš”å¹´ï¼Œéº—å¦‚é€£çºŒä¸‰å¹´ç”Ÿä¸‹äº†ä¸‰å€‹å…’å­ï¼Œå…§å‘çš„å¥¹ï¼Œä¸æ“…è¨€è©ï¼Œå¾ˆå°‘æ¥è§¸å¤–äººï¼Œå…¨éƒ¨æ™‚é–“æ”¾åœ¨å°ˆå¿ƒç…§é¡§å®¶äººï¼Œç”Ÿæ´»ååˆ†ç°¡å–®ã€‚è€Œä¿¡å¤«çš„å¤–å‘å€‹æ€§ï¼Œå–„æ–¼äº¤éš›ï¼Œå–œæ­¡æ‰“çƒã€çˆ¬å±±ï¼Œæ¥è¿‘å¤§è‡ªç„¶ï¼Œèˆ‡éº—å¦‚çš„å€‹æ€§æ°æ˜¯äº’è£œã€‚

â—æ…ˆæ¿Ÿå› ç·£çµ‚èº«å¥‘ç´„

ç•¶åˆæ¥è§¸æ…ˆæ¿Ÿçš„å› ç·£ï¼Œæ˜¯å­©å­å€‘å°±è®€ç§ç«‹å¹¼ç¨šåœ’æ™‚ï¼Œæ¯å¤©æ—©ä¸Šç­‰å¾…æ ¡è»Šä¹‹éš›ï¼Œæœƒé‡è¦‹æ¥ŠèŒ¹äº‘ï¼Œäº’é“æ—©å®‰ä½†æœªæœ‰é€²ä¸€æ­¥äº’å‹•ã€‚éäº†åŠå¹´å¾Œï¼Œæœ‰ä¸€å¤©èŒ¹äº‘æåˆ°èŠ±è“®æœ‰ä¸€ä½å¸«çˆ¶è¦è“‹é†«é™¢ï¼Œå•åŠéº—å¦‚æ˜¯å¦è¦æéŒ¢å¹«å¿™ï¼Ÿç•¶æ™‚ï¼Œéº—å¦‚è½äº†éå¸¸éœ‡æ’¼ï¼ŒåªçŸ¥é“è¨±å¤šå¯ºå»Ÿéƒ½æ˜¯æç£šå¡Šæ°´æ³¥ï¼Œå“ªæœ‰å¸«çˆ¶é‚£éº¼å‰å¤§è¦è“‹é†«é™¢ï¼Ÿæ–¼æ˜¯ï¼Œéš¨å³ç­”æ‡‰ä¸€å€‹æœˆæäº”ç™¾å…ƒï¼Œç•¶æ™‚å¿ƒæƒ³åªè¦çœä¸‹è¨‚å ±è²»ç”¨ä¸‰ç™¾å…ƒï¼Œå†æ·»å…©ç™¾å…ƒå°±å¯ä»¥åšå¥½äº‹äº†ã€‚

éº—å¦‚ä»¥å…¨å®¶äººçš„åç¾©ï¼Œå›ºå®šæ¯å€‹æœˆæéŒ¢å¹«åŠ©è“‹èŠ±è“®æ…ˆæ¿Ÿé†«é™¢ï¼Œä¿¡å¤«é–‹ç©ç¬‘å›æ‡‰ï¼šã€Œå¦³æ˜¯è·Ÿå¸«çˆ¶æ‰“é•·æœŸå¥‘ç´„å—ï¼Ÿä»¥å¾Œå·¥ä½œè‹¥æ²’äº†ï¼Œé‚„è¦ç¹¼çºŒæå—ï¼Ÿã€ç„¶å¾Œå°±å‡ºé–€é¨è»Šä¸Šç­ã€‚ä¸Šç­é€”ä¸­ï¼Œä¸æ…æ“¦æ’åˆ°ä¸€ä½ç©¿è¶Šé¦¬è·¯çš„æ”¶è²»å“¡ï¼Œä»–æ’¿èµ·æ‰è½çš„æ±è¥¿å¾Œï¼Œæ€’æ°£æ²–å¤©åœ°æœä¿¡å¤«é ­ä¸Šä¸€æ•²ï¼Œé€™ä¸€ç•¶é ­æ£’å–ï¼Œè®“ä¿¡å¤«éœ‡æ‡¾ï¼Œå½·å½¿è¯æƒ³åˆ°å¯èƒ½å‰›æ‰å°éº—å¦‚è¬›éŒ¯è©±äº†ï¼Œå›å®¶å¾Œæ…é‡å‘å¤ªå¤ªé“æ­‰ã€‚

å¤«å¦»å€†ç¬¬ä¸€æ¬¡åˆ°èŠ±è“®éœæ€ç²¾èˆï¼Œçœ‹åˆ°ä¸€èŠ±ä¸€è‰ï¼Œç”šç‚ºé©šå–œï¼Œæ¢ç©¶é€™äº›æ¤ç‰©ä¸€å®šæ˜¯å¤©å¤©æ²æµ´æ–¼è­‰åš´ä¸Šäººæ³•æ°´æ»‹æ½¤ï¼Œæ‰æœƒå¦‚æ­¤ç”Ÿæ°£ç›ç„¶ã€‚ç•¶å¤©æœå±±ç‚ºä¸Šäººç¥å£½ï¼Œå¿«åˆ°ç²¾èˆå‰ï¼Œå¿½ç„¶ä¸‹èµ·é›¨ä¾†ã€‚ä¸Šäººä¸æ¨å¤§å®¶æ·‹é›¨ï¼Œå°±å†’é›¨å‰ä¾†ï¼Œå–šå¤§å®¶è¶•ç·Šå…¥å…§ã€‚ä¿¡å¤«åœ¨åœ°ä¸Šè·ªæ‹œæ™‚ï¼Œå‰›å¥½èˆ‡ä¸Šäººçš„æ…ˆæ‚²ç›®å…‰æ¥è§¸ï¼Œå…§å¿ƒæ·±æ·±æ‚¸å‹•ï¼Œç•¶ä¸‹å³ç™¼é¡˜è¦å­¸ä¸ŠäººèŒ¹ç´ ã€‚

æœªåšå¿—å·¥ä¹‹å‰ï¼Œéº—å¦‚å…§å‘å®³ç¾ï¼Œåªè·Ÿå®¶äººäº’å‹•ã€‚æ¥ŠèŒ¹äº‘å‹¸èªªå¥¹å‡ºä¾†å‹Ÿæ¬¾ç•¶æ…ˆæ¿Ÿå§”å“¡ï¼Œéº—å¦‚éƒ½ä¸æ•¢ç­”æ‡‰ï¼Œå› ç‚ºèªè­˜çš„äººä¸å¤šï¼Œåˆä¸å–„è¨€è©ï¼Œå› è€Œæ‹’çµ•åƒåŠ åŸ¹è¨“ã€‚å¾Œä¾†æ˜¯ä¿¡å¤«ç­”æ‡‰æŠ•å…¥ï¼Œå¼•é ˜éº—å¦‚è·Ÿè‘—åƒèˆ‡ï¼Œå…©äººä¸€èµ·å‹Ÿå¿ƒå‹Ÿæ¬¾ï¼Œä¹Ÿä¸€èµ·å®Œæˆå—è­‰å§”å“¡ã€‚æ¯ä¸€æ¬¡åƒèˆ‡æ…ˆæ¿Ÿæ´»å‹•å¾Œçš„æ³•å–œï¼Œæ˜¯ä»–å€‘æŒçºŒåšæ…ˆæ¿Ÿçš„å‹•æ©Ÿèˆ‡æ”¯æŒåŠ›é‡ã€‚

éº—å¦‚åˆ°èŠ±è“®æ…ˆæ¿Ÿè­·å°ˆç•¶æ‡¿å¾·åª½åª½ï¼Œä¿¡å¤«æœƒé–‹è»Šæ¥é€ï¼Œè­·å°ˆå‡æ ¼ç‚ºæŠ€è¡“å­¸é™¢å¾Œï¼Œä¿¡å¤«é–‹å§‹åŠ å…¥æ…ˆèª çˆ¸çˆ¸çš„è¡Œåˆ—ï¼Œè‡³ä»Šé‚å…¥ç¬¬åä¸ƒå¹´äº†ã€‚å…©äººä¹Ÿæ˜¯å¤šå¹´æ‰¿æ“”è¬è¯æ…ˆå°‘ç­çš„ç­çˆ¸çˆ¸ã€ç­åª½åª½ï¼Œä½œç‚ºå­¸ç”Ÿèˆ‡è€å¸«ä¹‹é–“çš„æ©‹æ¨‘ï¼Œå­¸æ ¡çµ¦ä»–å€‘å°ˆæ¥­ï¼Œè€Œæ…ˆèª æ‡¿å¾·çˆ¸åª½çµ¦äºˆå­©å­äººæ–‡è–°é™¶ã€‚å¸Œæœ›åšå­©å­çš„å­¸ç¿’æ¦œæ¨£ï¼Œç”¨æ„›è‡ªå·±å…’å­çš„å¿ƒï¼Œå»é—œæ‡·åˆ¥äººçš„å­©å­ï¼Œä»¥åŒç†å¿ƒè¼”å°å­¸ç”Ÿã€‚

â—è§€æ©Ÿå‚³æ³•å¯¦è¸åŠ›è¡Œ

ä¿¡å¤«ç¶“å¸¸æŠŠæ¡æ©Ÿç·£å°±èªªæ…ˆæ¿Ÿï¼Œåœ¨ä¸€æ¬¡å…¬å¸çš„é€±æœƒï¼Œä¿¡å¤«åˆ†äº«æ…ˆæ¿Ÿçš„è¨ªè¦–èˆ‡é—œæ‡·ï¼Œæœƒå¾Œï¼Œæ„Ÿå‹•è¨±å¤šåŒäº‹ç™¼å¿ƒææ¬¾ä¸”åŠ å…¥æœƒå“¡ã€‚ç¸½ç¶“ç†æå‡ºäº†è¡›æ˜Ÿé›»è©±å…©æ”¯ï¼Œè®“åœ‹éš›æ•‘ç½æ™‚èƒ½è¯çµ¡å¿«æ·ã€‚æ¯æ¬¡æ”¶åˆ°é€™äº›æ„›çš„å›é¥‹ï¼Œè®“ä¿¡å¤«æ·±æ„Ÿæº«é¦¨ã€‚æœ‰ä¸€æ¬¡ï¼Œå‡ºå·®åˆ°æ­æ´²æ­ä¹˜é£›æ©Ÿæ™‚ï¼Œæ—é‚Šåè‘—ä¸€ä½å»è‹±åœ‹æ±‚å­¸çš„å¥³å­©å­ï¼Œçˆ¶è¦ªæ—¥æœ¬äººï¼Œåª½åª½è‡ºç£äººï¼Œä½†å¥¹ä¸æœƒèªªä¸­æ–‡èˆ‡è‡ºèªã€‚ä¸€è·¯ä¸Šï¼Œä¿¡å¤«èˆ‡å¥¹åˆ†äº«ä¸Šäººæ…ˆæ‚²å–„å¿µåŠæ…ˆæ¿Ÿå¿—æ¥­ã€‚å›åœ‹å¾Œï¼Œä¸ä¹…å°±æ”¶åˆ°å¥¹çš„ä¾†ä¿¡ï¼Œè¡¨ç¤ºæœƒåˆ©ç”¨å‡æ—¥åˆ°æ…ˆæ¿Ÿå€«æ•¦è¯çµ¡è™•ï¼Œå’Œå¿—å·¥å€‘ä¸€èµ·å»è¨ªè¦–è€äººï¼ŒåƒåŠ æ´»å‹•å¾Œçš„å¿ƒéˆè±æ”¶ã€‚é€™äº›å›é¥‹è®“ä¿¡å¤«æ„Ÿå—åˆ°å–„çš„å¾ªç’°æ•ˆæ‡‰ã€‚

å¤«å¦»å€†åƒèˆ‡åŸ¹è¨“çµ„çš„æ™‚é–“æœ€ä¹…ï¼Œå¾1996åˆ°2014å¹´ï¼Œé™ªä¼´æ¯å¹´çš„åŸ¹è¨“å§”å“¡äººæ•¸éå¢ã€‚éº—å¦‚æ‰¿æ“”å­¸å“¡è³‡æ–™å½™æ•´ï¼Œè³‡æ–™ä¸é½Šå…¨æ™‚ï¼Œä¸åƒ…é›»è©±é—œæ‡·ï¼Œé‚„è¦ªè‡ªå»æ”¶ä»¶ã€‚ç”±æ–¼é•·æœŸèˆ‡å­¸å“¡äº’å‹•ï¼Œå€’èƒŒå¦‚æµæ¯å€‹äººçš„åå­—ï¼Œè®“å­¸å“¡éƒ½å¾ˆæ„Ÿå‹•ã€‚è¦‹åˆ°ä¸€æ‰¹æ‰¹çš„å­¸å“¡å®Œæˆå—è­‰å§”å“¡ï¼Œå°±åƒæ˜¯æ¯é›å­µå‡ºå°é›èˆ¬åœ°èˆˆå¥®ï¼Œè¦‹åˆ°å–„çš„åŠ›é‡åˆå¢æ·»äº†ç”ŸåŠ›è»ã€‚

éº—å¦‚èªç‚ºè‡ªå·±çš„æˆé•·ï¼Œã€Œå­¸ç¿’ã€æ˜¯é‡è¦é—œéµã€‚ä»¥å‰è¾¦ä»»ä½•æ´»å‹•éƒ½ä¸æœƒï¼Œæ–¼æ˜¯å…ˆå¾è§€å¯Ÿåˆ¥äººå¦‚ä½•åšï¼Œè‡ªå·±å†å»åšæ¯”è¼ƒä¸æœƒå‡ºéŒ¯ï¼Œå¥¹è‡ªå˜²å¾ˆç¬¨ï¼Œå› æ­¤å‡¡äº‹éƒ½ç”¨å¿ƒå»å­¸ç¿’ã€‚åŒ…æ‹¬ç´€éŒ„æœƒè­°å…§å®¹ã€æ•´ç†åŸ¹è¨“è³‡æ–™ã€ç…§ç›¸åšæª”æ¡ˆç­‰ç­‰ï¼Œéƒ½æ˜¯åœ¨æ…ˆæ¿Ÿå¾ä¸æœƒå­¸åˆ°æœƒï¼Œæœ€å¤§çš„æ”¹è®Šï¼Œæ˜¯å¾ã€Œæ€•ç”Ÿã€åˆ°èªè­˜è¨±å¤šäººï¼Œæ¥è§¸è¨±å¤šå–„çŸ¥è­˜ï¼Œå¯ä»¥é¢å°é™Œç”Ÿäººèªªæ…ˆæ¿Ÿã€‚

é™³ä¿¡å¤«åšäº†äºŒåä¸ƒå¹´çš„æ…ˆæ¿Ÿå¿—å·¥ï¼Œèªç‚ºéš¨æ™‚ä¿æŒä¸€é¡†æ„›å¿ƒä¸è®Šï¼Œæœƒå¸¶å‹•å‘¨é‚Šå¾ˆå¤šäººã€‚å‰›é€²å…¥æ…ˆæ¿Ÿæ™‚ï¼Œæ˜¯æœ‰æ‰€æ±‚çš„ï¼Œå­¸ä½›ä¹Ÿæ˜¯æœ‰æ±‚ï¼Œæ‹œæ‹œä»¥ä¿å¹³å®‰ã€‚ç¾åœ¨åšå¿—å·¥å·²ç¶“ç„¡æ±‚ï¼Œé€™å€‹å¢ƒç•Œæ˜¯æ…¢æ…¢å½¢æˆçš„ï¼Œå¾ä¸€æ¬¡æ¬¡çš„å¿—å·¥åƒèˆ‡ä¸­ï¼Œé«”æœƒåˆ°ä¸Šäººæ‰€èªªã€Œä»˜å‡ºç„¡æ‰€æ±‚ã€ã€‚

ä¿¡å¤«çš„ä¸‰å§Šé™³æ¡‚å¨Ÿï¼Œå—åˆ°å¼Ÿå¼Ÿçš„æ„Ÿå¬ï¼ŒåƒåŠ åŸ¹è¨“ä¸¦å—è­‰ç‚ºæ…ˆæ¿Ÿå§”å“¡ã€‚æ¡‚å¨Ÿèªªï¼Œä¿¡å¤«å¾å°å°±å¾ˆå­é †ï¼Œå€‹æ€§åš´ä»¥å¾‹å·²ï¼Œå¯¬ä»¥å¾…äººæ˜¯å°å¾…å¤–äººï¼Œå°å®¶äººä¹Ÿè¦æ±‚æ¨™æº–å¾ˆé«˜ï¼Œæ‰€ä»¥ä¸‰å€‹å…’å­å°±å¾ˆæ€•ä»–ã€‚è‡ªå¾åƒèˆ‡æ…ˆæ¿Ÿä¹‹å¾Œï¼Œå°¤å…¶æ“”ä»»ç­çˆ¸çˆ¸ï¼Œé™ªä¼´ä»–äººå­©å­äº’å‹•ä¸­ï¼Œé€æ¼¸å­¸ç¿’æŸ”è»Ÿã€è¬™å‘ï¼Œä¹Ÿæ”¹å–„è‡ªå·±è¦ªå­é–“çš„äº’å‹•ã€‚

â—å’Œè«§ä¹‹éŸ³å‚³å¤§æ„›

äºŒåå¹´å‰æœ‰ä¸€å¤©å¤œæ™šï¼Œä¿¡å¤«è½åˆ°éº—å¦‚åœ¨ç¡å¤¢ä¸­ï¼Œé–‰è‘—çœ¼èªªè©±ï¼šã€Œè€å¸«ä¾†å®¶è£¡ä¸‰æ¬¡ï¼Œåª½åª½ç‚ºä»€éº¼ä¸çµ¦æˆ‘å»å­¸ç´ï¼Ÿã€å•œæ³£çš„è²éŸ³å¤¾é›œè‘—ç´°ç´°çš„æ­Œè²ï¼Œä¿¡å¤«ä»”ç´°ä¸€è½ï¼Œå¥¹å”±è‘—ä¸€é¦–è‡ºèªæ­Œã€ˆç­‰ç„¡äººã€‰ï¼Œç•¶æ™‚ä¿¡å¤«å¿ƒç–¼å¾—å¿ƒéƒ½ç¢äº†ã€‚å› æ­¤ï¼Œå°±é»˜é»˜è²·äº†ä¸€è‡ºé›»å­ç´é€å¥¹ï¼Œè€Œä¿¡å¤«çš„è²¼å¿ƒï¼Œä¸¦æ²’æœ‰æ›ä¾†éº—å¦‚çš„æ­¡å¿ƒï¼Œå¥¹èªç‚ºäº‹éå¢ƒé·ï¼ŒéŒ¯éäº†å­¸ç¿’çš„é»ƒé‡‘æ™‚æœŸï¼Œå·²ç¶“æ²’æœ‰ç”¨äº†ï¼Œé‚£éƒ¨èŠ±äº†å…«è¬å¤šå…ƒçš„é›»å­ç´ï¼Œå¾æ­¤å¡µå°ä¸å‹•ã€‚

å¾—çŸ¥åœ¨è¬è¯çµ‚èº«å­¸ç¿’ä¸­å¿ƒæœ‰é›»å­ç´é–‹èª²ï¼Œä¿¡å¤«å¥½é–‹å¿ƒï¼Œé›–ç„¶ä»–çš„éŸ³æ„Ÿå¾ˆå·®ï¼Œä½†é¼“å‹µä¸¦é™ªä¼´éº—å¦‚ä¸€èµ·å»å­¸ç¿’ï¼Œå°¤å…¶æ„Ÿæ©èƒ½åœ¨æ…ˆæ¿Ÿåœ“æ»¿é€™å€‹å¤¢æƒ³ã€‚å¾åƒèˆ‡å¿—å·¥æœå‹™ä¸­ï¼Œä¿¡å¤«è¦‹è­‰åˆ°è¨±å¤šå¤©ç½äººç¦ï¼Œå¿ƒæƒ³åœ¨ä¸–é–“è‹¥èƒ½å¤šäº›å’Œè«§ä¹‹éŸ³ï¼Œæˆ–è¨±èƒ½æ¸›å°‘äº›æš´æˆ¾è¡çªã€‚é€™ä¹Ÿæ­£æ˜¯ä»–å€‘æƒ³å‚³éçš„è²éŸ³ï¼Œé€éç´è²å°‡æ„›å‚³å‡ºå»ã€‚

è¬è¯çµ‚èº«å­¸ç¿’ä¸­å¿ƒé–‹è¾¦é›»å­ç´ç­ä»¥ä¾†ï¼Œè‡³ä»Šå·²æœ‰å››æœŸï¼Œä¿¡å¤«èˆ‡éº—å¦‚ä»ç„¶ä¸€ç›´åœ¨å­¸ç¿’ï¼Œå¦å¤–åœ¨å¯’æš‘å‡èˆ‡å‘¨å…­çš„å…’ç«¥é›»å­ç´ç­ï¼Œéƒ½æœƒæ“”ä»»æ•™è‚²å¿—å·¥ï¼Œå”åŠ©è€å¸«èˆ‡é™ªä¼´å­©å­å€‘å­¸ç¿’ã€‚ä»–å€‘è‡ªå·±æ¯å¤©åœ¨å®¶ä¸­ç·´ç¿’ï¼Œå­«å­åœ¨æ—è€³æ¿¡ç›®æŸ“ä¹Ÿå­¸æœƒçœ‹è­œå½ˆç´ï¼Œç¥–å­«ä¸€èµ·å½ˆç´ï¼Œå¢æ·»ä¸å°‘å®¶åº­å’Œæ¨‚ã€‚ä»–å€‘ä¹Ÿåˆ†äº«é€™åˆ†å–œæ¨‚ï¼Œç¶“å¸¸åœ¨æ…ˆæ¿Ÿè¨±å¤šæ´»å‹•ä¸­å½ˆç´ï¼Œè®“æ›´å¤šäººæ„Ÿå—åˆ°å’Œè«§ä¹‹éŸ³ï¼Œé€éç´è²å‚³å¤§æ„›ã€‚

ä¿¡å¤«èˆ‡éº—å¦‚é€€ä¼‘å¾Œçš„ç”Ÿæ´»ï¼Œå°±æ˜¯æ¯å¤©ç©æ¥µåƒèˆ‡å„é …å¿—å·¥æ´»å‹•ï¼Œç„¡æ‰€æ±‚çš„ä»˜å‡ºæœ€å¿«æ¨‚ï¼Œæ—¥æ—¥æ³•å–œç›ˆç„¶ã€‚ä»–å€‘æ·±åˆ‡æ„Ÿå—ï¼šã€Œäººé–“æ·¨åœŸä½•éœ€é æ±‚ï¼Œç•¶ä¸‹å³æ˜¯ã€‚ã€
"""

async def test_qinqinshuo_analysis():
    """æ¸¬è©¦ã€Šå½ˆç´èªªæ„›ã€‹å½±ç‰‡çš„LLMæ™ºèƒ½èªç¾©åˆ†æ"""
    
    print("ğŸ¹ ã€Šå½ˆç´èªªæ„›ã€‹LLMæ™ºèƒ½èªç¾©åˆ†ææ¸¬è©¦")
    print("=" * 80)
    print("ğŸ“ æ¸¬è©¦å°è±¡ï¼šè¬è¯çµ‚èº«å­¸ç¿’æ•™è‚²ä¸­å¿ƒæ•™è‚²å¿—å·¥é™³ä¿¡å¤«é„­éº—å¦‚å ±å°")
    print("ğŸ¯ æ¸¬è©¦é‡é»ï¼šè¤‡é›œäººç‰©é—œä¿‚ã€å¤šå±¤æ¬¡å¼•è¨€æ­¸å±¬ã€æ•™è‚²å¿—å·¥ä¸»é¡Œåˆ†æ")
    print("=" * 80)
    
    article_content = get_qinqinshuo_article()
    print(f"ğŸ“ æ–‡ç« é•·åº¦ï¼š{len(article_content)} å­—ç¬¦")
    print(f"ğŸ“– é ä¼°é–±è®€æ™‚é–“ï¼š{len(article_content) // 300:.1f} åˆ†é˜")
    
    try:
        print("\nğŸ”„ å•Ÿå‹•LLMæ™ºèƒ½åˆ†æå¼•æ“...")
        
        # å‰µå»ºåˆ†æå™¨
        analyzer = LLMSemanticAnalyzer()
        
        # åŸ·è¡Œå®Œæ•´åˆ†æ
        result = await analyzer.analyze_article(
            article_content, 
            "è¬è¯çµ‚èº«å­¸ç¿’æ•™è‚²ä¸­å¿ƒã€Šå½ˆç´èªªæ„›ã€‹æ•™è‚²å¿—å·¥å ±å°"
        )
        
        print("\n" + "=" * 80)
        print("ğŸ“Š LLMæ™ºèƒ½èªç¾©åˆ†æçµæœ")
        print("=" * 80)
        
        # === åˆ†æçµ±è¨ˆ ===
        metadata = result["article_metadata"]
        print(f"\nğŸ“ˆ ç³»çµ±æ€§èƒ½çµ±è¨ˆï¼š")
        print(f"  â”œâ”€ LLMä¾›æ‡‰å•†ï¼š{metadata.get('llm_provider_used', 'unknown')}")
        print(f"  â”œâ”€ Tokenæ¶ˆè€—ï¼š{metadata.get('llm_tokens_used', 0):,}")
        print(f"  â”œâ”€ åˆ†ææˆæœ¬ï¼š${metadata.get('llm_cost', 0):.6f}")
        print(f"  â”œâ”€ LLMéŸ¿æ‡‰æ™‚é–“ï¼š{metadata.get('llm_response_time', 0):.1f}ç§’")
        print(f"  â””â”€ ç¸½è™•ç†æ™‚é–“ï¼š{metadata.get('processing_time_ms', 0) / 1000:.1f}ç§’")
        
        # === äººç‰©åˆ†æï¼ˆé‡é»æ¸¬è©¦ï¼‰===
        entities = result["key_entities"]
        persons = entities.get("persons", [])
        
        print(f"\nğŸ‘¥ äººç‰©è­˜åˆ¥èˆ‡å¼•è¨€æ­¸å±¬åˆ†æï¼š")
        print(f"  ğŸ“Š è­˜åˆ¥äººç‰©ç¸½æ•¸ï¼š{len(persons)}")
        
        if persons:
            for i, person in enumerate(persons, 1):
                print(f"\n  ğŸ‘¤ äººç‰© {i}: {person['name']}")
                print(f"     â”œâ”€ èº«ä»½è·ç¨±ï¼š{person['title']}")
                print(f"     â”œâ”€ è§’è‰²å®šä½ï¼š{person['role']}")
                
                quotes = person['quotes']
                if quotes:
                    print(f"     â”œâ”€ å¼•è¨€æ•¸é‡ï¼š{len(quotes)} æ¢")
                    print(f"     â”œâ”€ å¼•è¨€å…§å®¹ï¼š")
                    for j, quote in enumerate(quotes[:3], 1):  # é¡¯ç¤ºå‰3æ¢
                        preview = quote[:80] + "..." if len(quote) > 80 else quote
                        print(f"     â”‚   {j}. \"{preview}\"")
                    if len(quotes) > 3:
                        print(f"     â”‚   ... (å¦æœ‰ {len(quotes) - 3} æ¢å¼•è¨€)")
                else:
                    print(f"     â”œâ”€ å¼•è¨€ï¼šæœªè­˜åˆ¥åˆ°ç›´æ¥å¼•è¨€")
                
                if person['expertise']:
                    print(f"     â””â”€ å°ˆæ¥­é ˜åŸŸï¼š{', '.join(person['expertise'])}")
                else:
                    print(f"     â””â”€ å°ˆæ¥­é ˜åŸŸï¼šå¾…åˆ†æ")
        else:
            print("  âš ï¸  æœªè­˜åˆ¥åˆ°ä¸»è¦äººç‰©")
        
        # === å¼•è¨€æ­¸å±¬é©—è­‰ ===
        print(f"\nğŸ¯ å¼•è¨€æ­¸å±¬æº–ç¢ºæ€§é©—è­‰ï¼š")
        
        # é æœŸçš„å¼•è¨€æ­¸å±¬ï¼ˆç”¨æ–¼é©—è­‰ï¼‰
        expected_quotes = {
            "é™³ä¿¡å¤«": [
                "å¦³æ˜¯è·Ÿå¸«çˆ¶æ‰“é•·æœŸå¥‘ç´„å—ï¼Ÿä»¥å¾Œå·¥ä½œè‹¥æ²’äº†ï¼Œé‚„è¦ç¹¼çºŒæå—ï¼Ÿ",
                "è€å¸«ä¾†å®¶è£¡ä¸‰æ¬¡ï¼Œåª½åª½ç‚ºä»€éº¼ä¸çµ¦æˆ‘å»å­¸ç´ï¼Ÿ"  # é€™æ‡‰è©²æ˜¯é„­éº—å¦‚çš„
            ],
            "é„­éº—å¦‚": [
                "å¥³å­©å­ä»¥å¾Œè¦æ§äººå®¶çš„é£¯ç¢—ï¼Œä¸€å®šè¦å­¸ç…®é£¯èœã€ç‡™è¡£æœç­‰å®¶å‹™",
                "è€å¸«ä¾†å®¶è£¡ä¸‰æ¬¡ï¼Œåª½åª½ç‚ºä»€éº¼ä¸çµ¦æˆ‘å»å­¸ç´ï¼Ÿ"
            ],
            "æ¥ŠèŒ¹äº‘": [
                "èŠ±è“®æœ‰ä¸€ä½å¸«çˆ¶è¦è“‹é†«é™¢"
            ],
            "é™³æ¡‚å¨Ÿ": [
                "ä¿¡å¤«å¾å°å°±å¾ˆå­é †ï¼Œå€‹æ€§åš´ä»¥å¾‹å·²"
            ]
        }
        
        # é©—è­‰å¼•è¨€æ­¸å±¬
        correct_assignments = 0
        total_expected = len(expected_quotes)
        
        for person_name, expected in expected_quotes.items():
            found_person = None
            for person in persons:
                if person_name in person['name'] or person['name'] in person_name:
                    found_person = person
                    break
            
            if found_person:
                actual_quotes = found_person['quotes']
                if actual_quotes:
                    # ç°¡å–®æª¢æŸ¥æ˜¯å¦æœ‰ç›¸é—œå¼•è¨€
                    has_match = any(
                        any(word in actual_quote for word in expected_quote.split()[:3])
                        for expected_quote in expected
                        for actual_quote in actual_quotes
                    )
                    if has_match:
                        correct_assignments += 1
                        print(f"  âœ… {person_name}: å¼•è¨€æ­¸å±¬æ­£ç¢º")
                    else:
                        print(f"  âš ï¸  {person_name}: å¼•è¨€æ­¸å±¬éœ€è¦ç¢ºèª")
                else:
                    print(f"  âŒ {person_name}: æœªæ‰¾åˆ°å¼•è¨€")
            else:
                print(f"  âŒ {person_name}: äººç‰©æœªè­˜åˆ¥")
        
        print(f"  ğŸ“Š å¼•è¨€æ­¸å±¬æº–ç¢ºç‡ï¼š{correct_assignments}/{total_expected} ({correct_assignments/total_expected*100:.1f}%)")
        
        # === çµ„ç¹”æ©Ÿæ§‹åˆ†æ ===
        organizations = entities.get("organizations", [])
        if organizations:
            print(f"\nğŸ¢ çµ„ç¹”æ©Ÿæ§‹è­˜åˆ¥ï¼š")
            for org in organizations:
                print(f"  â€¢ {org['name']} ({org['type']}) - é‡è¦æ€§ï¼š{org['importance']}")
        
        # === äº‹ä»¶èˆ‡æ™‚é–“ç·šåˆ†æ ===
        events = entities.get("events", [])
        timeline = entities.get("timeline", [])
        
        if events:
            print(f"\nğŸ“… é—œéµäº‹ä»¶è­˜åˆ¥ï¼š")
            for event in events:
                print(f"  â€¢ {event['name']} - å½±éŸ¿ç¨‹åº¦ï¼š{event.get('impact_level', 'N/A')}/10")
        
        if timeline:
            print(f"\nâ° æ™‚é–“ç·šæ¢³ç†ï¼š")
            for item in timeline[:5]:  # é¡¯ç¤ºå‰5å€‹
                print(f"  â€¢ {item.get('time_reference', 'N/A')}: {item.get('event', 'N/A')}")
        
        # === æ™ºèƒ½é—œéµè©æå– ===
        vectors = result["semantic_vectors"]
        print(f"\nğŸ¯ æ™ºèƒ½é—œéµè©æå–ï¼ˆé›¶ç¡¬ç·¨ç¢¼ï¼‰ï¼š")
        
        keyword_types = {
            'content_keywords': 'ğŸ“ å…§å®¹é—œéµè©',
            'technical_keywords': 'ğŸ”§ æŠ€è¡“æ¦‚å¿µè©',
            'action_keywords': 'ğŸ¬ å‹•ä½œæè¿°è©',
            'emotion_keywords': 'ğŸ’ æƒ…æ„Ÿè¡¨é”è©'
        }
        
        for vector_type, keywords in vectors.items():
            if keywords and vector_type in keyword_types:
                type_name = keyword_types[vector_type]
                displayed_keywords = keywords[:6]  # é¡¯ç¤ºå‰6å€‹
                print(f"  {type_name}ï¼š{', '.join(displayed_keywords)}")
                if len(keywords) > 6:
                    print(f"    (+ {len(keywords) - 6} å€‹æ›´å¤šé—œéµè©)")
        
        # === å‰ªè¼¯æ™ºèƒ½å»ºè­° ===
        editing = result["editing_intelligence"]
        if any(editing.values()):
            print(f"\nğŸ¬ BigDipperå‰ªè¼¯æ™ºèƒ½å»ºè­°ï¼š")
            
            if editing["primary_editing_cues"]:
                print(f"  ğŸ¯ ä¸»è¦å‰ªè¼¯ç·šç´¢ï¼š")
                for cue in editing["primary_editing_cues"][:3]:
                    print(f"    â€¢ {cue}")
            
            if editing["visual_requirements"]:
                print(f"  ğŸ“¹ è¦–è¦ºç´ æéœ€æ±‚ï¼š")
                for req in editing["visual_requirements"][:3]:
                    print(f"    â€¢ {req}")
            
            if editing["pacing_suggestions"]:
                print(f"  â±ï¸ ç¯€å¥å»ºè­°ï¼š")
                for pace in editing["pacing_suggestions"][:2]:
                    print(f"    â€¢ {pace}")
        
        # === åŠŸèƒ½é©—è­‰ç¸½çµ ===
        print(f"\nğŸ† åŠŸèƒ½é©—è­‰ç¸½çµï¼š")
        
        success_indicators = []
        
        # æª¢æŸ¥å„é …åŠŸèƒ½
        if metadata.get('llm_provider_used') and metadata.get('llm_provider_used') != 'fallback':
            success_indicators.append("âœ… LLMæ™ºèƒ½åˆ†æå¼•æ“æ­£å¸¸")
        
        if len(persons) >= 2:
            success_indicators.append("âœ… å¤šäººç‰©è­˜åˆ¥æˆåŠŸ")
        
        if any(person['quotes'] for person in persons):
            success_indicators.append("âœ… äººç‰©å¼•è¨€æå–æˆåŠŸ")
        
        if vectors.get('content_keywords'):
            success_indicators.append("âœ… é›¶ç¡¬ç·¨ç¢¼é—œéµè©ç”ŸæˆæˆåŠŸ")
        
        if len(organizations) >= 2:
            success_indicators.append("âœ… çµ„ç¹”æ©Ÿæ§‹è­˜åˆ¥æˆåŠŸ")
        
        if editing.get('primary_editing_cues'):
            success_indicators.append("âœ… æ™ºèƒ½å‰ªè¼¯å»ºè­°ç”ŸæˆæˆåŠŸ")
        
        # æª¢æŸ¥å¼•è¨€é‡è¤‡å•é¡Œï¼ˆé—œéµBugé©—è­‰ï¼‰
        all_quotes = []
        for person in persons:
            all_quotes.extend(person['quotes'])
        
        unique_quotes = set(all_quotes)
        if len(all_quotes) == 0 or len(all_quotes) == len(unique_quotes):
            success_indicators.append("âœ… äººç‰©å¼•è¨€Bugä¿®å¾©æˆåŠŸï¼ˆç„¡é‡è¤‡åˆ†é…ï¼‰")
        else:
            success_indicators.append("âš ï¸  äººç‰©å¼•è¨€å¯èƒ½ä»æœ‰é‡è¤‡åˆ†é…")
        
        print(f"  ğŸ“Š æˆåŠŸé …ç›®ï¼š{len([s for s in success_indicators if s.startswith('âœ…')])}")
        for indicator in success_indicators:
            print(f"  {indicator}")
        
        # === æœ€çµ‚çµè«– ===
        success_rate = len([s for s in success_indicators if s.startswith('âœ…')]) / len(success_indicators)
        
        print(f"\nğŸŠ æ¸¬è©¦çµè«–ï¼š")
        if success_rate >= 0.8:
            print(f"  ğŸš€ ã€Šå½ˆç´èªªæ„›ã€‹LLMæ™ºèƒ½èªç¾©åˆ†ææ¸¬è©¦ - å„ªç§€é€šéï¼")
            print(f"  ğŸ’ ç³»çµ±åŠŸèƒ½å®Œå‚™ï¼Œäººç‰©å¼•è¨€Bugä¿®å¾©æˆåŠŸ")
            print(f"  ğŸ¯ æº–ç¢ºè­˜åˆ¥æ•™è‚²å¿—å·¥ä¸»é¡Œèˆ‡è¤‡é›œäººç‰©é—œä¿‚")
        elif success_rate >= 0.6:
            print(f"  âœ… ã€Šå½ˆç´èªªæ„›ã€‹LLMæ™ºèƒ½èªç¾©åˆ†ææ¸¬è©¦ - è‰¯å¥½é€šé")
            print(f"  ğŸ“ˆ ä¸»è¦åŠŸèƒ½æ­£å¸¸ï¼Œéƒ¨åˆ†ç´°ç¯€å¯å„ªåŒ–")
        else:
            print(f"  âš ï¸  æ¸¬è©¦ç™¼ç¾éœ€æ”¹é€²é …ç›®ï¼Œå»ºè­°é€²ä¸€æ­¥èª¿æ•´")
        
        print(f"\nğŸ’° åˆ†ææˆæœ¬ï¼š${metadata.get('llm_cost', 0):.6f} (æœ¬æ©ŸXinferenceå…è²»)")
        print(f"âš¡ è™•ç†æ•ˆç‡ï¼š{len(article_content) / (metadata.get('processing_time_ms', 1) / 1000):.0f} å­—ç¬¦/ç§’")
        
        return True
        
    except Exception as e:
        print(f"\nâŒ åˆ†æéç¨‹ç™¼ç”ŸéŒ¯èª¤ï¼š{e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    print("ğŸ¹ æº–å‚™åŸ·è¡Œã€Šå½ˆç´èªªæ„›ã€‹LLMæ™ºèƒ½èªç¾©åˆ†ææ¸¬è©¦...")
    success = asyncio.run(test_qinqinshuo_analysis())
    
    if success:
        print(f"\nâœ¨ ã€Šå½ˆç´èªªæ„›ã€‹æ¸¬è©¦å®Œæˆï¼LLMæ™ºèƒ½èªç¾©åˆ†æåŠŸèƒ½é©—è­‰æˆåŠŸï¼")
        print(f"ğŸ¯ äººç‰©å¼•è¨€æ­¸å±¬Bugä¿®å¾©æ•ˆæœå·²é©—è­‰")
    else:
        print(f"\nâš ï¸  æ¸¬è©¦æœªå®Œæˆï¼Œè«‹æª¢æŸ¥ç³»çµ±é…ç½®")